<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Judge Cars</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <!-- 카테고리 버튼 -->
    <div class="d-flex justify-content-start mb-4">
        <button class="btn btn-outline-secondary me-2"
                data-progress="before"
                th:classappend="${currentProgress == false} ? 'active btn-secondary' : ''"
                onclick="loadPage('/admin/registration/false')">등록 전</button>
        <button class="btn btn-outline-success me-2"
                data-progress="after"
                th:classappend="${currentProgress == true} ? 'active btn-success' : ''"
                onclick="loadPage('/admin/registration/true')">등록 완료</button>
    </div>

    <!-- 심사 상태 테이블 -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center">
            <thead class="table-success">
            <tr>
                <th>No</th>
                <th>자동차 아이디</th>
                <th>브랜드</th>
                <th>모델명</th>
                <th>이미지</th>
                <th>등록</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="car, iterStat : ${registrationCars} " >
                <td th:text="${iterStat.index + 1}"></td>
                <td th:text="${car.carId}"></td>
                <td th:text="${car.carModel}"></td>
                <td th:text="${car.carBrand}"></td>
                <td>
                    <img th:src="@{${car.carImage}}" alt="Car Image" class="img-fluid" style="max-width: 100px;" />
                </td>
                <td class="d-flex justify-content-center align-items-center" style="min-height: 50px;">
                    <!-- 등록하기 버튼: car.progress가 0일 때만 표시 -->
                    <button
                            th:if="${car.isVisible() == 0}"
                            class="btn btn-secondary"
                            th:data-car-sales-id="${car.carSalesId}"
                            th:data-car-id="${car.carId}"
                            th:data-distance="${car.distance}"
                            th:data-navigation="${car.navigation}"
                            th:data-hud="${car.hud}"
                            th:data-ventilated-seat="${car.ventilatedSeat}"
                            th:data-cruise-control="${car.cruiseControl}"
                            th:data-sunroof="${car.sunroof}"
                            th:data-parking-distance-warning="${car.parkingDistanceWarning}"
                            th:data-line-out-warning="${car.lineOutWarning}"
                            th:data-car-image="${car.carImage}"
                            th:data-car-brand="${car.carBrand}"
                            th:data-car-model="${car.carModel}"
                            data-bs-toggle="modal"
                            data-bs-target="#registrationModal"
                            onclick="openRegistrationModal(this)">
                        등록 하기
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- 등록 모달 -->
<div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">등록하기</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- 기존 필드 -->
                <p><strong>구매 번호:</strong> <span id="modal-model-purchaseId"></span></p>
                <p><strong>자동차 아이디:</strong> <span id="modal-car-id"></span></p>
                <p><strong>거리:</strong> <span id="modal-distance"></span> km</p>
                <p><strong>내비게이션:</strong> <span id="modal-navigation"></span></p>
                <p><strong>HUD:</strong> <span id="modal-hud"></span></p>
                <p><strong>통풍 시트:</strong> <span id="modal-ventilated-seat"></span></p>
                <p><strong>크루즈 컨트롤:</strong> <span id="modal-cruise-control"></span></p>
                <p><strong>선루프:</strong> <span id="modal-sunroof"></span></p>
                <p><strong>주차 거리 경고:</strong> <span id="modal-parking-distance-warning"></span></p>
                <p><strong>차선 이탈 경고:</strong> <span id="modal-line-out-warning"></span></p>
                <p><strong>브랜드:</strong> <span id="modal-car-brand"></span></p>
                <p><strong>모델명:</strong> <span id="modal-car-model"></span></p>

                <!-- 지점 설정 추가 -->
                <p><strong>지점 설정:</strong></p>
                <select id="modal-agency-id" class="form-control">
                    <option value="" disabled selected>지점을 선택하세요</option>
                    <option th:each="agency : ${agencies}"
                            th:value="${agency.id}"
                            th:text="${agency.name}">
                    </option>
                </select>

                <!-- 가격 설정 -->
                <p class="mt-3"><strong>가격 설정:</strong></p>
                <input type="number" id="modal-price" class="form-control" placeholder="가격을 입력하세요">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                <button type="button" class="btn btn-success" onclick="submitRegistration()">등록 제출</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

